---
interface Props {
  title?: string;
  description?: string;
  canonical?: string;
}
const SITE_URL = "https://tractiva.cl";
const {
  title = "Gestión de Google Ads en Chile — Campañas que Generan Clientes | tractiva",
  description = "Gestionamos campañas de Google Ads para profesionales y pymes en Chile. Optimización semanal, reportes claros y clientes reales desde $50.000/mes. Sin contratos de permanencia.",
  canonical = SITE_URL,
} = Astro.props;
import "../styles/global.css";
---

<!doctype html>
<html lang="es-CL">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href={canonical} />

    <!-- SEO Core -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta
      name="keywords"
      content="google ads chile, gestión google ads, agencia google ads santiago, campañas google ads pymes, publicidad google chile, sem chile, google ads profesionales, ads para emprendedores chile"
    />
    <meta name="author" content="tractiva" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:site_name" content="tractiva" />
    <meta property="og:locale" content="es_CL" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />

    <!-- Theme -->
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17952824212"
    ></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "AW-17952824212");
    </script>

    <!-- Schema.org Structured Data -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        name: "tractiva",
        description:
          "Gestión profesional de campañas de Google Ads para pymes y profesionales en Chile.",
        url: SITE_URL,
        telephone: "+56994186218",
        email: "contacto@kumeraweb.com",
        address: {
          "@type": "PostalAddress",
          addressCountry: "CL",
          addressLocality: "Santiago",
        },
        areaServed: {
          "@type": "Country",
          name: "Chile",
        },
        priceRange: "$$",
        currenciesAccepted: "CLP",
        hasOfferCatalog: {
          "@type": "OfferCatalog",
          name: "Servicios Google Ads",
          itemListElement: [
            {
              "@type": "Offer",
              name: "Setup inicial de campaña Google Ads",
              price: "75000",
              priceCurrency: "CLP",
              description:
                "Configuración completa de cuenta, campañas, grupos de anuncios y landing page incluida.",
            },
            {
              "@type": "Offer",
              name: "Gestión mensual de Google Ads",
              price: "50000",
              priceCurrency: "CLP",
              description:
                "Optimización semanal, reportes de costo por lead, acceso total a la cuenta.",
            },
          ],
        },
        sameAs: ["https://wa.me/56994186218"],
      })}
    />
  </head>
  <body>
    <div class="scroll-progress" id="scroll-progress"></div>
    <slot />
    <script>
      // Scroll reveals + keyword underlines
      const obs = new IntersectionObserver(
        (entries) => {
          entries.forEach((e) => {
            if (e.isIntersecting) {
              e.target.classList.add("is-visible");
              obs.unobserve(e.target);
            }
          });
        },
        { threshold: 0.12, rootMargin: "0px 0px -40px 0px" },
      );
      document
        .querySelectorAll(".reveal, .line-reveal, .keyword")
        .forEach((el) => obs.observe(el));

      // Scroll progress line
      const prog = document.getElementById("scroll-progress");
      if (prog) {
        const updateProgress = () => {
          const h = document.documentElement.scrollHeight - window.innerHeight;
          const pct = h > 0 ? (window.scrollY / h) * 100 : 0;
          prog.style.height = pct + "%";
          prog.classList.toggle("is-active", pct > 1 && pct < 99);
        };
        window.addEventListener("scroll", updateProgress, { passive: true });
        updateProgress();
      }

      // Navbar scroll
      const nav = document.getElementById("site-nav");
      if (nav) {
        const onScroll = () =>
          nav.classList.toggle("is-scrolled", window.scrollY > 40);
        window.addEventListener("scroll", onScroll, { passive: true });
        onScroll();
      }

      // Brand flip loop
      const flips = document.querySelectorAll(".brand-flip");
      if (flips.length) {
        setInterval(() => {
          flips.forEach((f) => f.classList.add("is-flipped"));
          setTimeout(
            () => flips.forEach((f) => f.classList.remove("is-flipped")),
            1500,
          );
        }, 5000);
      }

      // Service list toggle
      document.querySelectorAll(".service-row").forEach((row) => {
        row.addEventListener("click", () => {
          const item = row.closest(".service-item");
          if (!item) return;
          const wasOpen = item.classList.contains("is-open");
          document
            .querySelectorAll(".service-item.is-open")
            .forEach((i) => i.classList.remove("is-open"));
          if (!wasOpen) item.classList.add("is-open");
        });
      });

      // FAQ accordion
      document.querySelectorAll(".faq-trigger").forEach((trigger) => {
        trigger.addEventListener("click", () => {
          const item = trigger.closest(".faq-item");
          if (!item) return;
          const wasOpen = item.classList.contains("is-open");
          document.querySelectorAll(".faq-item.is-open").forEach((i) => {
            i.classList.remove("is-open");
            i.querySelector(".faq-trigger")?.setAttribute(
              "aria-expanded",
              "false",
            );
          });
          if (!wasOpen) {
            item.classList.add("is-open");
            trigger.setAttribute("aria-expanded", "true");
          }
        });
      });
    </script>
  </body>
</html>
